<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="./media/chess_knight_dark.svg" type="image/svg+xml">
    <script>
        // Hide the error message as soon as possible
        window.onload = function() {
            document.getElementById('no-js').style.display = 'none';
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        // Fallback for confetti if CDN fails
        if (typeof confetti === 'undefined') {
            window.confetti = function(options) {
                console.log("Confetti fallback called with options:", options);
                // Basic fallback implementation
                return {
                    particleCount: options.particleCount || 50,
                    spread: options.spread || 70,
                    origin: options.origin || {
                        y: 0.6,
                        x: 0.5
                    }
                };
            };
        }
    </script>
    <script src="./script.js" type="module"></script>
    <title>Chess Puzzles</title>
</head>

<body>

    <header>
        <button id="menu-button">
            <!-- menu icon c/o Google Fonts / Material Symbols: https://fonts.google.com/ -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg>
            <span>menu</span>
        </button>
        <h1 id="title"><img src="./media/chess_knight_dark.svg" alt="Knight" class="title-icon" height="36"> Chess Puzzles</h1>
    </header>

    <div id="game-info">
        <!-- Timer and game info will go here -->
    </div>

    <main id="board">
        <div id="a1" class="R"><span></span></div>
        <div id="a2" class="P"><span></span></div>
        <div id="a3"><span></span></div>
        <div id="a4"><span></span></div>
        <div id="a5"><span></span></div>
        <div id="a6"><span></span></div>
        <div id="a7" class="p"><span></span></div>
        <div id="a8" class="r"><span></span></div>

        <div id="b1" class="N"><span></span></div>
        <div id="b2" class="P"><span></span></div>
        <div id="b3"><span></span></div>
        <div id="b4"><span></span></div>
        <div id="b5"><span></span></div>
        <div id="b6"><span></span></div>
        <div id="b7" class="p"><span></span></div>
        <div id="b8" class="n"><span></span></div>

        <div id="c1" class="B"><span></span></div>
        <div id="c2" class="P"><span></span></div>
        <div id="c3"><span></span></div>
        <div id="c4"><span></span></div>
        <div id="c5"><span></span></div>
        <div id="c6"><span></span></div>
        <div id="c7" class="p"><span></span></div>
        <div id="c8" class="b"><span></span></div>

        <div id="d1" class="Q"><span></span></div>
        <div id="d2" class="P"><span></span></div>
        <div id="d3"><span></span></div>
        <div id="d4"><span></span></div>
        <div id="d5"><span></span></div>
        <div id="d6"><span></span></div>
        <div id="d7" class="p"><span></span></div>
        <div id="d8" class="q"><span></span></div>

        <div id="e1" class="K"><span></span></div>
        <div id="e2" class="P"><span></span></div>
        <div id="e3"><span></span></div>
        <div id="e4"><span></span></div>
        <div id="e5"><span></span></div>
        <div id="e6"><span></span></div>
        <div id="e7" class="p"><span></span></div>
        <div id="e8" class="k"><span></span></div>

        <div id="f1" class="B"><span></span></div>
        <div id="f2" class="P"><span></span></div>
        <div id="f3"><span></span></div>
        <div id="f4"><span></span></div>
        <div id="f5"><span></span></div>
        <div id="f6"><span></span></div>
        <div id="f7" class="p"><span></span></div>
        <div id="f8" class="b"><span></span></div>

        <div id="g1" class="N"><span></span></div>
        <div id="g2" class="P"><span></span></div>
        <div id="g3"><span></span></div>
        <div id="g4"><span></span></div>
        <div id="g5"><span></span></div>
        <div id="g6"><span></span></div>
        <div id="g7" class="p"><span></span></div>
        <div id="g8" class="n"><span></span></div>

        <div id="h1" class="R"><span></span></div>
        <div id="h2" class="P"><span></span></div>
        <div id="h3"><span></span></div>
        <div id="h4"><span></span></div>
        <div id="h5"><span></span></div>
        <div id="h6"><span></span></div>
        <div id="h7" class="p"><span></span></div>
        <div id="h8" class="r"><span></span></div>
    </main>

    <footer id="message">
        <p id="no-js" style="display: none;">
            <strong>Oh no!</strong> Either JavaScript is <a href="https://duckduckgo.com/?q=how+to+enable+javascript" target="_blank">disabled</a>, you have <br>a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/Errors" target="_blank">CORS
                error</a>, or you aren't running a <a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/Tools_and_setup/set_up_a_local_testing_server" target="_blank">local server</a>.
        </p>
        <noscript>
            <p>
                <strong>Oh no!</strong> JavaScript is disabled. Please <a href="https://duckduckgo.com/?q=how+to+enable+javascript" target="_blank">enable JavaScript</a> to use this application.
            </p>
        </noscript>
    </footer>

    <div id="congrats-message" style="display:none;">
        <h2>Congratulations!</h2>
        <p>You solved the puzzle correctly!</p>
    </div>

    <aside id="debug" style="display: none;"></aside>

    <div id="info-modal" style="display:none;">
        <div>
            <button class="close-button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 96 960 960"><path d="m249 849-42-42 231-231-231-231 42-42 231 231 231-231 42 42-231 231 231 231-42 42-231-231-231 231Z"/></svg>
                <span>close</span> 
            </button>
            <h1 id="title"><img src="./media/chess_knight_dark.svg" alt="Knight" class="title-icon" height="36"> Chess Puzzles</h1>
            <p id="game-info"></p>
            <h2>How to Play</h2>
            <p>Solve chess puzzles by finding the best move. Click on a piece to select it, then click on a highlighted square to move.</p>
            <p>The game will tell you if your move is correct. Complete puzzles to increase your rating!</p>
            <h2>Created by Utkal</h2>
            <h3>Did You Know?</h3>
            <p class="chess-fact">Loading interesting chess facts...</p>
        </div>
    </div>
</body>

</html>